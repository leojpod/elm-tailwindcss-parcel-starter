# elm-tailwindcss-parcel-starter

I used to work with [create-elm-app](https://github.com/halfzebra/create-elm-app)
but for the past year or so I've been using a simpler set-up.
Instead of rewriting that set-up all the time, I decided to make it a template
and here it is.
This set-up aims to be simple yet fully working for writing elm applications
styled with tailwindcss and packed up with parcel.js.

You can see the result [here](https://leojpod.github.io/elm-tailwindcss-parcel-starter)

## Running it

Once you've created your new project with this template just `cd` in it and run:

```sh
npm install
```

Once you've all the dependencies installed you'll need to have 2 small script
running side by side. The first one if to compile the style files into `src/style.css`:

```sh
npm run css:watch
```

You can run `npm run css:build` to simply build the css once.
Note that is you run it in "production" (i.e. `NODE_ENV npm run css:build`),
tailwind's purge will kick in and your CSS file size is going to shrink quite
drastically.

The second command to run parcel and kick up the server is:

```sh
npm start
```

That should be all!

## How does it work?

### Start with CSS

The build step is quite simple in truth. Firstly, the
[tailwind-cli](http://tailwindcss.com/) is responsible for generating a single
css file from the `tailwind.config.js` file and the `src/css/style.css`
file as well as any CSS file you'd refer too from that entry point.
The single CSS file is generated at `src/style.css` (this will change one day
and be placed somewhere else than in `src`).
This css build step can be run either by `npm run css:build`, which will run
once, or by running `npm run css:watch` which will run the build each time the
`tailwind.config.js` file is changed or one of the CSS file inside `src/css/` does.
Lastly, `npm run css:prod` will activate tailwind's purging and remove from the
generated CSS any tailwind rule that is not used.

### Build the rest with parcel

[Parcel](parceljs.org) is used to pack everything else and generate the final
files. I won't say much about parcel in here since their doc is great and the
main benefit of Parcel is that it only need an entry point to workout what you
need for your build. In this template, the entry point is simply
`src/index.html`. From there, Parcel detects `src/index.ts` which loads the
`src/elm/Main.elm`, etc.

The files generated by Parcel are all hashed to make it easier to work with
updating assets:

- only the `index.html` needs to be invalidated from cache (e.g. Amazon cloudfront, ...)
- the hashes won't change if the file content won't change
